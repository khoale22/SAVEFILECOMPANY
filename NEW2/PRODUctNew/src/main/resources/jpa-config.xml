<?xml version="1.0" encoding="UTF-8"?>
<!--
  ~ application-config.xml
  ~
  ~  Copyright (c) 2018 H-E-B
  ~  All rights reserved.
  ~
  ~  This software is the confidential and proprietary information
  ~  of H-E-B.
  -->

<beans xmlns="http://www.springframework.org/schema/beans"
	   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	   xmlns:jpa="http://www.springframework.org/schema/data/jpa"

	   xsi:schemaLocation="
        http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/data/jpa
        http://www.springframework.org/schema/data/jpa/spring-jpa-1.0.xsd
       ">

	<!-- Configuration for master data connection. -->

	<!-- Entity manager -->
	<bean id="emfOracle" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean" primary="true">
		<property name="dataSource" ref="dataSourceOracle" />
		<property name="jpaVendorAdapter">
			<bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter" />
		</property>
		<property name="packagesToScan">
			<array>
				<value>com.heb.batch.wic.entity</value>
				<value>com.heb.batch.wic.utils.jpa</value>
			</array>
		</property>
		<property name="jpaProperties">
			<props>
				<prop key="hibernate.dialect">
					org.hibernate.dialect.Oracle12cDialect
				</prop>
				<prop key="hibernate.max_fetch_depth">3</prop>
				<prop key="hibernate.jdbc.fetch_size">50</prop>
				<prop key="hibernate.jdbc.batch_size">10</prop>
				<prop key="hibernate.show_sql">${jpa.showSql}</prop>
				<prop key="hibernate.temp.use_jdbc_metadata_defaults">false</prop>
				<prop key="hibernate.default_schema">${jpa.schema.oracle}</prop>
				<prop key="hibernate.enable_lazy_load_no_trans">true</prop>
			</props>
		</property>
	</bean>

	<!-- Transaction manager -->
	<bean id="jpaTransactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
		<property name="entityManagerFactory" ref="emfOracle"/>
	</bean>

	<!-- Package to search for JPA objects. -->
	<jpa:repositories base-package="com.heb.batch.wic.repository"
					  entity-manager-factory-ref="emfOracle"
					  transaction-manager-ref="jpaTransactionManager"/>

	<!-- End configuration for master data connection. -->
</beans>
